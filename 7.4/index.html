<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>PHP 7.4 | What's New in PHP</title><meta name="description" content="PHP更新历史收录">
    <link rel="modulepreload" href="/what-is-new-in-php/assets/app.abccbc7d.js"><link rel="modulepreload" href="/what-is-new-in-php/assets/index.html.457eb01e.js"><link rel="modulepreload" href="/what-is-new-in-php/assets/index.html.b66a129a.js">
    <link rel="stylesheet" href="/what-is-new-in-php/assets/style.afa454f6.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/what-is-new-in-php/" class=""><!----><span class="site-name">What&#39;s New in PHP</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/what-is-new-in-php/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="PHP 7"><span class="title">PHP 7</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="PHP 7"><span class="title">PHP 7</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/7.0/" class="" aria-label="PHP 7.0"><!--[--><!--]--> PHP 7.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/7.1/" class="" aria-label="PHP 7.1"><!--[--><!--]--> PHP 7.1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/7.2/" class="" aria-label="PHP 7.2"><!--[--><!--]--> PHP 7.2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/7.3/" class="" aria-label="PHP 7.3"><!--[--><!--]--> PHP 7.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/what-is-new-in-php/7.4/" class="router-link-active router-link-exact-active router-link-active" aria-label="PHP 7.4"><!--[--><!--]--> PHP 7.4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="PHP 8"><span class="title">PHP 8</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="PHP 8"><span class="title">PHP 8</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/8.0/" class="" aria-label="PHP 8.0"><!--[--><!--]--> PHP 8.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/8.1/" class="" aria-label="PHP 8.1"><!--[--><!--]--> PHP 8.1 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/what-is-new-in-php/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="PHP 7"><span class="title">PHP 7</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="PHP 7"><span class="title">PHP 7</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/7.0/" class="" aria-label="PHP 7.0"><!--[--><!--]--> PHP 7.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/7.1/" class="" aria-label="PHP 7.1"><!--[--><!--]--> PHP 7.1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/7.2/" class="" aria-label="PHP 7.2"><!--[--><!--]--> PHP 7.2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/7.3/" class="" aria-label="PHP 7.3"><!--[--><!--]--> PHP 7.3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/what-is-new-in-php/7.4/" class="router-link-active router-link-exact-active router-link-active" aria-label="PHP 7.4"><!--[--><!--]--> PHP 7.4 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="PHP 8"><span class="title">PHP 8</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="PHP 8"><span class="title">PHP 8</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/8.0/" class="" aria-label="PHP 8.0"><!--[--><!--]--> PHP 8.0 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/what-is-new-in-php/8.1/" class="" aria-label="PHP 8.1"><!--[--><!--]--> PHP 8.1 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">PHP 7.4 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/what-is-new-in-php/7.4/#箭头函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="箭头函数"><!--[--><!--]--> 箭头函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#类型属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="类型属性"><!--[--><!--]--> 类型属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#改进的类型差异" class="router-link-active router-link-exact-active sidebar-item" aria-label="改进的类型差异"><!--[--><!--]--> 改进的类型差异 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#null-合并运算符" class="router-link-active router-link-exact-active sidebar-item" aria-label="Null 合并运算符"><!--[--><!--]--> Null 合并运算符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#数组展开运算符" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组展开运算符"><!--[--><!--]--> 数组展开运算符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#数值分隔符" class="router-link-active router-link-exact-active sidebar-item" aria-label="数值分隔符"><!--[--><!--]--> 数值分隔符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#三元运算符弃用" class="router-link-active router-link-exact-active sidebar-item" aria-label="三元运算符弃用"><!--[--><!--]--> 三元运算符弃用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#串联优先" class="router-link-active router-link-exact-active sidebar-item" aria-label="串联优先"><!--[--><!--]--> 串联优先 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#无效的数组访问警告" class="router-link-active router-link-exact-active sidebar-item" aria-label="无效的数组访问警告"><!--[--><!--]--> 无效的数组访问警告 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/what-is-new-in-php/7.4/#strip-tags-接受数组" class="router-link-active router-link-exact-active sidebar-item" aria-label="strip_tags 接受数组"><!--[--><!--]--> strip_tags 接受数组 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="php-7-4" tabindex="-1"><a class="header-anchor" href="#php-7-4" aria-hidden="true">#</a> PHP 7.4</h1><p>PHP 7.4是PHP的最新稳定版本。</p><p>它于2019年11月28日发布，是 PHP 8 之前的最新版本。</p><p>它带来了许多新函数，语法添加和修复。</p><h2 id="箭头函数" tabindex="-1"><a class="header-anchor" href="#箭头函数" aria-hidden="true">#</a> 箭头函数</h2><p>箭头函数也称为&quot;短闭包&quot;，它允许较少冗长的单行函数。</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// 之前的写法：</span>
<span class="token function">array_map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">User</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token variable">$users</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 现在的写法：</span>
<span class="token function">array_map</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">User</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">id</span><span class="token punctuation">,</span> <span class="token variable">$users</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="类型属性" tabindex="-1"><a class="header-anchor" href="#类型属性" aria-hidden="true">#</a> 类型属性</h2><p>类型的声明，类型提示，以及指定确定类型的变量传递给函数或类的方法。</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword type-declaration">int</span> <span class="token variable">$id</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>除了 <code>void</code> 和 <code>callable</code> 外，所有的类型都支持。</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword type-declaration">int</span> <span class="token variable">$scalarType</span><span class="token punctuation">;</span>
<span class="token keyword">protected</span> <span class="token class-name type-declaration">ClassName</span> <span class="token variable">$classType</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token operator">?</span><span class="token class-name type-declaration">ClassName</span> <span class="token variable">$nullableClassType</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为什么不支持 void 和 callable？下面是 RFC 的解释</p><blockquote><p>The void type is not supported, because it is not useful and has unclear semantics. 不支持 void 类型，是因为它没用，并且语义不清晰。</p><p>The callable type is not supported, because its behavior is context dependent. 不支持 callable 类型，因为其行为取决于上下文。</p></blockquote><p>因此，我们可以放心使用 bool，int，float，string，array，object，iterable，self，parent，当然还有我们很少使用的 nullable 空允许 (?type)</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// 静态属性的类型</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword type-declaration">iterable</span> <span class="token variable">$staticProp</span><span class="token punctuation">;</span>

<span class="token comment">// var 中声明属性</span>
<span class="token keyword">var</span> <span class="token keyword type-declaration">bool</span> <span class="token variable">$flagl</span>

<span class="token comment">// 设置默认的值</span>
<span class="token comment">// 注意，只有 nullable 的类型，才能设置默认值为 null</span>
<span class="token keyword">public</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$str</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;foo&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$nullableStr</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">;</span>

<span class="token comment">// 多个同类型变量的声明</span>
<span class="token keyword">public</span> <span class="token keyword type-declaration">float</span> <span class="token variable">$x</span><span class="token punctuation">,</span> <span class="token variable">$y</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>如果传递不符合给定类型的变量，会发生什么?</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword type-declaration">int</span> <span class="token variable">$id</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">id</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 这个会产生一个致命的错误 Fatal error: Uncaught TypeError: Typed property User::$name must be string, array used in /app/types.php:9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="改进的类型差异" tabindex="-1"><a class="header-anchor" href="#改进的类型差异" aria-hidden="true">#</a> 改进的类型差异</h2><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">ParentType</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">ChildType</span> <span class="token keyword">extends</span> <span class="token class-name">ParentType</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">A</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">covariantReturnTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ParentType</span>
    <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">covariantReturnTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ChildType</span>
    <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">A</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">contraVariantArguments</span><span class="token punctuation">(</span><span class="token class-name type-declaration">ChildType</span> <span class="token variable">$type</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">contraVariantArguments</span><span class="token punctuation">(</span><span class="token class-name type-declaration">ParentType</span> <span class="token variable">$type</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> <span class="token comment">/* … */</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="null-合并运算符" tabindex="-1"><a class="header-anchor" href="#null-合并运算符" aria-hidden="true">#</a> Null 合并运算符</h2><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// 之前</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;date&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;date&#39;</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 现在</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;date&#39;</span><span class="token punctuation">]</span> <span class="token operator">??=</span> <span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="数组展开运算符" tabindex="-1"><a class="header-anchor" href="#数组展开运算符" aria-hidden="true">#</a> 数组展开运算符</h2><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$arrayA</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$arrayB</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token variable">$arrayA</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token variable">$arrayB</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1, 2, 3, 4, 5, 6, 7]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><strong>注意：</strong> 仅适用于带数字键的数组。</p></blockquote><h2 id="数值分隔符" tabindex="-1"><a class="header-anchor" href="#数值分隔符" aria-hidden="true">#</a> 数值分隔符</h2><p>PHP 7.4允许使用下划线在视觉上分隔数字值。 看起来像这样:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$unFormattedNumber</span> <span class="token operator">=</span> <span class="token number">107925284.88</span><span class="token punctuation">;</span>
<span class="token variable">$formattedNumber</span> <span class="token operator">=</span> <span class="token number">107_925_284.88</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>下划线仅被引擎忽略。</p><h2 id="三元运算符弃用" tabindex="-1"><a class="header-anchor" href="#三元运算符弃用" aria-hidden="true">#</a> 三元运算符弃用</h2><p>该RFC为嵌套三元语句添加了弃用警告。 在PHP 8中，此弃用将转换为编译时错误。</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token number">3</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">;</span>   <span class="token comment">// deprecated</span>
<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="串联优先" tabindex="-1"><a class="header-anchor" href="#串联优先" aria-hidden="true">#</a> 串联优先</h2><p>如果要编写这样的内容:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;sum: &quot;</span> <span class="token operator">.</span> <span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>PHP以前会这样解释它:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;sum: &quot;</span> <span class="token operator">.</span> <span class="token variable">$a</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>PHP 8将使其如此解释:</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;sum: &quot;</span> <span class="token operator">.</span> <span class="token punctuation">(</span><span class="token variable">$a</span> <span class="token operator">+</span> <span class="token variable">$b</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>当遇到在 <code>+</code> 或 <code>-</code> 符号之前的包含的未括号表达式时，PHP 7.4 添加了弃用警告。</p><h2 id="无效的数组访问警告" tabindex="-1"><a class="header-anchor" href="#无效的数组访问警告" aria-hidden="true">#</a> 无效的数组访问警告</h2><p>如果要对一个整数使用数组访问语法； PHP以前会返回 null 。 从PHP 7.4开始，将发出通知。</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token variable">$i</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Notice</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="strip-tags-接受数组" tabindex="-1"><a class="header-anchor" href="#strip-tags-接受数组" aria-hidden="true">#</a> strip_tags 接受数组</h2><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// 您过去只能剥离多个标签</span>
<span class="token function">strip_tags</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;a&gt;&lt;p&gt;&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// PHP 7.4还允许使用数组</span>
<span class="token function">strip_tags</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;p&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: q.curder@gmail.com">curder</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/what-is-new-in-php/assets/app.abccbc7d.js" defer></script>
  </body>
</html>
